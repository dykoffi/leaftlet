<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8">
  <title>Carte GTFS</title>
  <title lang="en">GTFS Map</title>

  <meta name="thumbnail" content="logo.png">
  <meta name="application-name" content="gtfs-map">
  <meta name="application-name" lang="en" content="gtfs-map">
  <meta name="description" content="Application de visualisation des données de transport à partir de fichier gtfs">
  <meta name="description" lang="en" content="Application to visualize transport data from gtfs files">
  <meta name="keywords" content="gtfs, transport">
  <meta name="keywords" lang="en" content="gtfs, transport">
  <meta name="vocabulary-accept" content="">
  <meta name="vocabulary-require" content="">

  <script type="text/javascript">window.APPLICATION = %APPLICATION%</script>
</head>

<body>
  <div id="root"></div>
  <script>
    let application = window.APPLICATION
    let mapZoom = 3
    let initialLat = 25.3241665257384
    let initialLng = 23.73046875
    let gtfsFile = ""
    if (application && application.configuration) {
      let config = application.configuration

      mapZoom = config.initialMapInfo?.mapZoom || mapZoom
      initialLat = config.initialMapInfo?.mapCenterLat || initialLat
      initialLng = config.initialMapInfo?.mapCenterLng || initialLng

      if (config.attachments && config.attachments[0] && config.datasets[0] && config.datasets[0].attachments) {
        gtfsFile = config.attachments[0].url
      }
    }
    let mapCenter = [initialLat, initialLng]
  </script>
  <script> window.gtfsFile = "http://localhost:8080/file/download" // gtfsFile </script>
  <script> window.leaflet = { zoom: mapZoom, center: mapCenter }</script>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>